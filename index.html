<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <style>
      #pages {
        text-align: right;
      }
      .container {
        width: 100%;
        margin: 0;
        padding: 0;
      }
      .btn-trash {
        background-color: rgb(255, 255, 255);
        border: none;
        color: rgb(255, 0, 0);
        padding: 12px 16px;
        font-size: 16px;
        cursor: pointer;
      }

      /* Darker background on mouse-over */
      .btn-trash:hover {
        background-color: rgb(221, 221, 221);
      }
      .btn-edit {
        background-color: rgb(255, 255, 255);
        border: none;
        color: rgb(255, 247, 0);
        padding: 12px 16px;
        font-size: 16px;
        cursor: pointer;
      }
      ul li {
        display: inline;
      }

      #employees-head-name {
        margin-top: 10px;
        color: rgb(255, 255, 255);
        font-family: "Courier New", Courier, monospace;
      }

      .pages {
        background-color: rgb(255, 255, 255);
        border: none;
        color: rgb(0, 0, 0);
        padding: 12px 16px;
        font-size: 16px;
        border-radius: 4px;
        cursor: pointer;
      }
      .pages:hover {
        background-color: #03a9f4;
      }
      #employees-head {
        background-color: rgb(67 93 125);
      }
      /* Darker background on mouse-over */
      .btn-edit:hover {
        background-color: rgb(221, 221, 221);
      }
    </style>
    <title>Ustore Challenge 2</title>
  </head>
  <body>
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
      integrity="sha384-JZR
      6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <!-- Modal -->
    <div class="modal fade" id="addModal" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Add New Employee</h4>
            <button type="button" class="close" data-dismiss="modal">
              &times;
            </button>
          </div>
          <div class="modal-body">
            <form>
              <div class="form-group">
                <label for="inputName">Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="inputName"
                  aria-describedby="nameHelp"
                  placeholder="Enter Name"
                />
              </div>
              <div class="form-group">
                <label for="inputEmail">Email address</label>
                <input
                  type="email"
                  class="form-control"
                  id="inputEmail"
                  aria-describedby="emailHelp"
                  placeholder="Enter email"
                />
              </div>
              <div class="form-group">
                <label for="inputAddress">Address</label>
                <input
                  type="text"
                  class="form-control"
                  id="inputAddress"
                  aria-describedby="addressHelp"
                  placeholder="Enter Address"
                />
              </div>
              <div class="form-group">
                <label for="inputPhone">Phone</label>
                <input
                  type="text"
                  class="form-control"
                  id="inputPhone"
                  aria-describedby="phoneHelp"
                  placeholder="Enter Phone"
                />
              </div>
            </form>
          </div>

          <div class="modal-footer">
            <button
              type="button"
              id="btn-closeEmployee"
              class="btn btn-default"
              onclick="cleanForm()"
              data-dismiss="modal"
            >
              Close
            </button>
            <button
              type="submit"
              id="btn-addEmployee"
              onclick="newEmp()"
              class="btn btn-default"
              data-dismiss="modal"
            >
              Add
            </button>
          </div>
        </div>
      </div>
    </div>
    <div id="employees-head" class="container-fluid">
      <div class="row">
        <div id="employees-head-name" class="col-6">
          <h1>Manage Employees</h1>
        </div>
        <div class="col-6" style="text-align: right">
          <ul>
            <li>
              <button
                type="button"
                class="btn btn-danger"
                style="margin-top: 10px"
                onclick="deleteSelected()"
              >
                <i class="fa fa-minus-circle" aria-hidden="true"></i>
                Delete
              </button>
            </li>
            <li>
              <button
                type="button"
                class="btn btn-success"
                style="margin-top: 10px"
                data-toggle="modal"
                data-target="#addModal"
                
              >
                <i class="fa fa-plus-circle" aria-hidden="true"></i>
                Add New Employee
              </button>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="table-responsive">
      <table class="table">
        <thead class="thead">
          <th scope="col">
            <input type="checkbox" onclick="selectAll('check-ALL')" id="check-ALL" name="check-ALL" />
          </th>
          <th scope="col">Name</th>
          <th scope="col">Email</th>
          <th scope="col">Address</th>
          <th scope="col">Phone</th>
          <th scope="col">Actions</th>
        </thead>
        <tbody id="employees-tbody"></tbody>
      </table>
    </div>
    <div class="container-fluid">
      <div class="row">
        <div class="col-6">
          <a href="">Showing 5 out of 25 entries</a>
        </div>
        <div id="pages" class="col-6">
          <ul>
            <li><button class="pages">Previous</button></li>
            <li><button class="pages">1</button></li>
            <li><button class="pages">2</button></li>
            <li><button class="pages">3</button></li>
            <li><button class="pages">4</button></li>
            <li><button class="pages">5</button></li>
            <li><button class="pages">Next</button></li>
          </ul>
        </div>
      </div>
    </div>
    <script>
      var selectedEmployees = [];
      var employees = [
        {
          name: "Thomas Hardy",
          email: "thomashardy@mail.com",
          address: "89 Chiaroscuro Rd, Portland, USA",
          phone: "(171) 555-2222",
        },
        {
          name: "Dominique Perrier",
          email: "dominiqueperrier@mail.com",
          address: "Obere Str. 57, Berlin, Germany",
          phone: "(313) 555-5735",
        },
        {
          name: "Maria Anders",
          email: "mariaanders@mail.com",
          address: "rue Lauristonm, Paris, France",
          phone: "(503) 555-9931",
        },
        {
          name: "Fran Wilson",
          email: "franwilson@mail.com",
          address: "C/ Araquil, 67, Madrid, Span",
          phone: "(204) 619-5731",
        },
        {
          name: "Martin Blank",
          email: "martinblank@mail.com",
          address: "Via Monte Bianco 34, Turin, Italy",
          phone: "(480) 631-2097",
        },
      ];
      function selectAll(selectAllId) {
          let lines = document.getElementById("employees-tbody").getElementsByTagName("tr");
        if(document.getElementById(selectAllId).checked){
            for (let index = 0; index < lines.length; index++) {
                const line = lines[index];
                let checkBox = line.querySelector('input[type=checkbox]');
                if(checkBox){
                    checkBox.checked = true;
                    selectedEmployees.push(line.id);
                }
            }
        } else {
            for (let index = 0; index < lines.length; index++) {
                const line = lines[index];
                let checkBox = line.querySelector('input[type=checkbox]');
                if(checkBox){
                    checkBox.checked = false;
                    let idx = selectedEmployees.indexOf(line.id);
                    if (idx > -1) {
                        selectedEmployees.splice(idx, 1);
                    }
                }
            }
        }

        
      }
      function deleteSelected() {
        for (let index = 0; index < selectedEmployees.length; index++) {
            const idx = selectedEmployees[index];
            document.getElementById(idx).remove();
        }
        selectedEmployees = [];
      }
      function setSelected(rowId, checkboxId) {
        if(document.getElementById(checkboxId).checked && !selectedEmployees.includes(rowId)){
            selectedEmployees.push(rowId);
        } else if(selectedEmployees.includes(rowId)){
            let idx = selectedEmployees.indexOf(rowId);
            if (idx > -1) {
                selectedEmployees.splice(idx, 1);
            }
        }
      }
      function addEmployees(tableName, employees) {
        var table = document.getElementById(tableName);
        for (let index = 0; index < employees.length; index++) {
          const employee = employees[index];
          addEmployee(table, index, employee);
        }
      }
      function removeLine(id) {
        document.getElementById(id).remove();
      }
      function cleanForm() {
        document.getElementById("inputName").value = "";
        document.getElementById("inputEmail").value = "";
        document.getElementById("inputAddress").value = "";
        document.getElementById("inputPhone").value = "";
      }
      function newEmp() {
        let name = document.getElementById("inputName").value;
        let email = document.getElementById("inputEmail").value;
        let address = document.getElementById("inputAddress").value;
        let phone = document.getElementById("inputPhone").value;

        cleanForm();

        let newEmp = {
          name: name,
          email: email,
          address: address,
          phone: phone,
        };

        employees.push(newEmp);
        var table = document.getElementById("employees-tbody");
        addEmployee(table, employees.length, newEmp);
      }
      function addEmployee(table, index, employee) {
        table.innerHTML += `
                <tr id="row${index}">
                   <th scope="row"><input type="checkbox" onchange="setSelected('row${index}','row-checkbox${index}')" id="row-checkbox${index}" name="row${index}" /></th>
                   <td>${employee.name}</td>
                   <td>${employee.email}</td>
                   <td>${employee.address}</td>
                   <td>${employee.phone}</td>
                   <td>
                     <button class="btn-edit"><i class="fa fa-pencil"></i></button>
                     <button id="btnRemoveEmployee${index}" onclick="removeLine('row${index}')" class="btn-trash"><i class="fa fa-trash"></i></button>
                   </td>
                 </tr>
                `;
      }
      addEmployees("employees-tbody", employees);
    </script>
  </body>
</html>
